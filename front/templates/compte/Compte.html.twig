{% extends 'base.html.twig' %}

{% block title %}Compte{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('css/app.css') }}">
{% endblock %}

{% block body %}
<div class="header">
    <a class="logo" href="http://127.0.0.1:8000/accueil">RÉSEAU IIA</a>
</div>

<div class="example-wrapper form-wrapper">
    <h2 class="form-titles">Bonjour {{ username }} !</h2>
    <form method="POST" enctype="multipart/form-data" action="{{ path('upload_profile_picture') }}">
        <div>
            <label for="photo">Choisir une photo</label>
            <input type="file" id="photo" name="profile_picture" accept="image/*" required>
        </div>
        <button type="submit" style="max-width: 120px;display: flex; align-items: center; gap: 6px; font-size: 14px; padding: 6px 10px; border-radius: 4px;">
            <i class="fas fa-save" style="font-size: 14px;"></i> Sauvegarder
        </button>


    </form>

    <h2 class="form-titles">Mes tweets</h2>
    <!-- Liste des tweets -->
    <div class="tweets-list">
        {% for tweet in userTweets %}
            <div class="tweet" style=" border: 1px solid #ddd;background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 15px;">
                <div class="tweet-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                    <div class="author" style="font-weight: bold; color: #333;">
                        {{ tweet.user }}
                    </div>
                    <div class="date" style="font-size: 12px; color: #777;">
                        {{ tweet.createdAt|date('d/m/Y H:i') }}
                    </div>
                </div>
                <div class="tweet-content" style="font-size: 16px; margin-bottom: 12px;">
                    {{ tweet.content }}
                </div>
                <form method="post" action="{{ path('tweet_delete', {'id': tweet.id}) }}" onsubmit="return confirm('Voulez-vous vraiment supprimer ce tweet ?');" style="text-align: right;">
                    <button type="submit" style="background-color: #e74c3c; color: white; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer; display: flex; align-items: center; gap: 6px; max-width: 42px;">
                        <i class="fas fa-trash"></i>
                    </button>

                </form>
            </div>
        {% else %}
            <p>Aucun tweet trouvé.</p>
        {% endfor %}


    </div>
</div>

<div id="flash-messages-container" style="position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); z-index: 9999;">
    {% for label, messages in app.flashes %}
        {% for message in messages %}
            <div style="background-color: #2196F3; padding: 12px 24px; margin-top: 8px; border-radius: 6px; color: white; font-weight: 600; min-width: 300px; box-shadow: 0 2px 6px rgba(0,0,0,0.2);">
                <div class="flash-{{ label }}">
                    {{ message }}
                </div>
            </div>
        {% endfor %}
    {% endfor %}
</div>
{% endblock %}
